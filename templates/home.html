{% extends "base.html" %}
{% block title %}
    Home
{% endblock %}

{% block styles %}
<link href="{{url_for('static', filename='css/home.css')}}" rel="stylesheet">
{% endblock %}

{% block scripts %}
<script>
window.app_weather = {{ weather | tojson }};
window.app_posts = {{ posts_meta | tojson }};
</script>
{% endblock %}

{% block body %}
    {{ weather }}

    {% if posts_meta %}
    <ol id="posts">
    {% for post in posts_meta %}
        <li class="post">
            {% if post.external_url %}
            <a href="{{ post.external_url | safe }}" target="_blank">
            {% else %}
            <a href="{{ post.url | safe }}">
            {% endif %}
                <h2 class="post-title">
                    {{ post.title }}

                    {% if post.external_url %}
                    <span class="icon-external">[external icon]</span>
                    {% endif %}

                    {% if post.type %}
                    <span class="icon-{{ post.type }}">[{{ post.type }} icon]</span>
                    {% endif %}
                </h2>
                <p class="post-summary">{{ post.summary | safe }}</p>
                {% if post.date and not post.is_default_date %}
                <span class="post-date">{{ post.date | datetime('%d %B %Y') }}</span>
                {% endif %}
            </a>
        </li>
    {% endfor %}
    </ol>
    {% endif %}

    {% if work_history %}
    <ul id="work">
    {% for job in work_history %}
        {% set start, end = job.dates %}
        <li class="job">
            <h2 class="job-company">{{ job.company }}</h2>
            <p class="job-title">{{ job.title }}</p>
            <p class="job-dates">
                <span class="job-dates-start">{{ start | datetime('%b %Y') }}</span>
                - 
                <span class="job-dates-end">
                    {{ end | datetime('%b %Y') | default('Now',true) }}
                </span>
            </p>
        </li>
    {% endfor %}
    </ul>
    {% endif %}
{% endblock %}
